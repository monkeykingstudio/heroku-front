<div *ngIf="!diapauseLoaded" class="schedule">
  <form (ngSubmit)='saveDiapause()' [formGroup]="diapauseForm">
    <div class="inner-separator"></div>
    <div *ngIf="!diapauseStart" style="margin: 1rem 0 .5rem 0;" class=" d-flex justify-content-around">
      <div class="form-check">
        <input
        (input)="switchSchedule()"
        type="radio"
        formControlName="schedule"
        class="form-check-input"
        id="autoStart"
        [value]='false'
        />
        <span
        class="form-check-label">Start today</span><span tooltipClass="antslab-tooltip"
        placement="top"
        ngbTooltip="Start a diapause from now" class="info">?</span>
      </div>

      <div class="form-check">
        <input
        [disabled]="schedule"
        (input)="switchSchedule()"
        type="radio"
        formControlName="schedule"
        class="form-check-input"
        id="schedule"
        [value]='true'
        />
        <span class="form-check-label">Schedule</span>
      </div>
    </div>

    <div *ngIf="!diapauseStart" class="inner-separator"></div>

    <div *ngIf="!schedule && !diapauseStart" class="form-row direct-start">
      <div class="form-group col-md-6">
        <label for="">Start date</label>
        <input
        [disabled]='true' [value]="startDate | date:'yyyy-MM-dd, hh:mm'" (input)="startDate=parseDate($event.target.value)" placeholder="{{startDate | date: 'yyyy-MM-dd, hh:mm'}}" class="form-control date-input">
      </div>
      <div class="form-group col-md-6">
        <label for="">End date</label>
        <input
        type="text" min="startDate" placeholder="{{endDate  | date:'yyyy-MM-dd, hh:mm'}}" onfocus="(this.type='datetime-Local')" onblur="(this.type='text')" [value]="endDate | date:'yyyy-MM-dd,hh:mm'" (input)="endDate=parseDate($event.target.value)" class="form-control date-input">
      </div>
    </div>

    <div *ngIf="schedule && !diapauseStart" class="form-row schedule-start">
      <div class="form-group col-md-6">
        <label for="">Start date</label>
        <input
        [value]="startDate | date:'yyyy-MM-dd, hh:mm'" onfocus="(this.type='datetime-Local')" onblur="(this.type='text')" (input)="startDate=parseDate($event.target.value)" placeholder="{{startDate | date: 'yyyy-MM-dd, hh:mm'}}" class="form-control date-input">
      </div>
      <div class="form-group col-md-6">
        <label for="">End date</label>
        <input
        (change)="endDate"
        type="text" placeholder="{{endDate | date:'yyyy-MM-dd, hh:mm'}}" onfocus="(this.type='datetime-Local')" onblur="(this.type='text')" [value]="endDate | date:'yyyy-MM-dd, hh:mm'" (input)="endDate=parseDate($event.target.value)" class="form-control date-input">
      </div>
    </div>
    <span class="animate__animated animate__fadeInDown badge-invalid" *ngIf='!dateCheck'>End date can't be lower than start date, and start date can't be higher than end date!</span>

    <div class="align-items: center; input-group"></div>

    <div *ngIf="!diapauseStart" class="inner-separator"></div>
      <div *ngIf="endDate && diapauseStart" class="line">
        <div style="margin-bottom: 10px;" class="date-cont">
          <span class="title">Started at: </span><span class='start-date'>{{startDate | date:'yyyy-MM-dd, hh:mm'}}</span>
        </div>
        <div class="date-cont">
          <span class="title">Will end at: </span><span class='end-date'>{{endDate | date:'yyyy-MM-dd, hh:mm'}}</span>
        </div>

      </div>
      <div class="line">
        <span>Messor Barbarus colonies currently in diapause : <b>5</b></span>
      </div>
    <div *ngIf="endDate && diapauseStart" class="inner-separator"></div>
    <div [ngClass]="!diapauseStart ? 'margin-1-1' : 'margin-1'" class="d-flex buttons">
      <button [disabled]="!endDate" *ngIf="!diapauseStart" type='submit' class='green-btn w-100'>START DIAPAUSE</button>
      <button (click)="openPopup('abortPopup')" *ngIf="endDate && diapauseStart" type='button' class='red-btn w-100'>ABORT DIAPAUSE</button>
    </div>

  </form>
</div>

<div *ngIf="diapauseLoaded" class="schedule">
  <span style="text-align: center">Loaded from database</span>
  <form (ngSubmit)='saveDiapause()' [formGroup]="diapauseForm">
    <div class="inner-separator"></div>

      <div class="line">
        <div style="margin-bottom: 10px;" class="date-cont">
          <span class="title">Started at: </span><span class='start-date'>{{this.loadedDiapause[0].period.startDate | date: 'short'}}</span>
        </div>
        <div class="date-cont">
          <span class="title">Will end at: </span><span class='end-date'>{{this.loadedDiapause[0].period.endDate | date: 'short'}}</span>
        </div>

      </div>

      <div class="inner-separator"></div>

      <div class="line">
        <span>Messor Barbarus colonies currently in diapause : <b>5</b></span>
      </div>
    <div class="inner-separator"></div>
    <div  class="d-flex buttons margin-1-1">
      <button (click)="openPopup('abortPopup')" type='button' class='red-btn w-100'>ABORT DIAPAUSE</button>
    </div>
  </form>
</div>
